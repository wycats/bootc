<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<!--
  Fix emoji rendering in Electron/VS Code.
  
  The COLRv1 vector emoji font (google-noto-color-emoji-fonts) is incompatible
  with the current Electron/Chromium rendering stack. This config ensures the
  legacy bitmap NotoColorEmoji.ttf takes precedence.
  
  Uses mode="append" instead of <prefer> to avoid breaking Nerd Font glyphs.
-->
<fontconfig>
  <match target="pattern">
    <test name="family"><string>serif</string></test>
    <edit name="family" mode="append" binding="weak">
      <string>Noto Color Emoji</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="family"><string>sans-serif</string></test>
    <edit name="family" mode="append" binding="weak">
      <string>Noto Color Emoji</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="family"><string>monospace</string></test>
    <edit name="family" mode="append" binding="weak">
      <string>Noto Color Emoji</string>
    </edit>
  </match>

  <alias>
    <family>JetBrainsMono Nerd Font</family>
    <prefer>
      <family>JetBrainsMono Nerd Font</family>
      <family>Noto Color Emoji</family>
    </prefer>
  </alias>
</fontconfig>
